package model;

import java.io.Serializable;
import java.util.Set;

public class Pet implements Serializable {
	
	final public static int TAM_ID = 5;
	final public static int TAM_MAX_NOME = 50;
	
	final public static int VALOR_MIN_DIA = 1;
	final public static int VALOR_MAX_DIA = 31;
	final public static int VALOR_MIN_ANO = 1900;
	final public static int VALOR_ANO_ATUAL = java.time.Year.now().getValue();
	
	private String id;
	private String nome;
	private String especie;
	private String raca;
	private int diaNasc;
	private String mesNasc;
	private int anoNasc;
	private float peso;

	private Tutor tutor;

	public Pet(String id, String nome, String especie,
			String raca, int diaNasc, String mesNasc, int anoNasc, float peso, Tutor tutor) throws ModelException {
		super();
		this.setId(id);
		this.setNome(nome);
		this.setEspecie(especie);
		this.setRaca(raca);
		this.setDiaNasc(diaNasc);
		this.setMesNasc(mesNasc);
		this.setAnoNasc(anoNasc);
		this.setPeso(peso);
		this.setTutor(tutor);
	}

	public String getId() {
		return id;
	}

	public void setId(String id) throws ModelException{
		Pet.validarId(id);
		this.id = id;
	}

	public String getNome() {
		return nome;
	}

	public void setNome(String nome) throws ModelException{
		Pet.validarNome(nome);
		this.nome = nome;
	}

	public String getEspecie() {
		return especie;
	}

	public void setEspecie(String especie) throws ModelException{
		Pet.validarEspecie(especie);
		this.especie = especie;
	}

	public String getRaca() {
		return raca;
	}

	public void setRaca(String raca) throws ModelException{
		Pet.validarRaca(raca);
		this.raca = raca;
	}
	
	public int getDiaNasc() {
		return diaNasc;
	}

	public void setDiaNasc(int diaNasc) throws ModelException{
		Pet.validarDiaNasc(diaNasc);
		this.diaNasc = diaNasc;
	}

	public String getMesNasc() {
		return mesNasc;
	}

	public void setMesNasc(String mesNasc) throws ModelException{
		Pet.validarMesNasc(mesNasc);
		this.mesNasc = mesNasc;
	}

	public int getAnoNasc() {
		return anoNasc;
	}

	public void setAnoNasc(int anoNasc) throws ModelException{
		Pet.validarAnoNasc(anoNasc);
		this.anoNasc = anoNasc;
	}

	public float getPeso() {
		return peso;
	}

	public void setPeso(float peso) throws ModelException {
		Pet.validarPeso(peso);
		this.peso = peso;
	}

	public Tutor getTutor() {
		return tutor;
	}

	public void setTutor(Tutor tutor) throws ModelException{
		Pet.validarTutor(tutor);
		this.tutor = tutor;
	}

	public static void validarId(String id) throws ModelException{
		if(id == null || id.length() == 0)
			throw new ModelException("O ID não pode ser nulo."); 
		
		if(id.length() != TAM_ID)
			throw new ModelException("O ID deve ter " + TAM_ID + " caracteres."); 
		
		for(int i = 0; i < id.length(); i++) {
			char c = id.charAt(i);
			
			if(!Character.isAlphabetic(c) && !Character.isDigit(c))
				throw new ModelException("O ID tem um caractere inválido '" + c + "' na posição "+ i + ".");
		}
	}
	
	public static void validarNome(String nome) throws ModelException{
		
		if (nome == null || nome.length() == 0)
			throw new ModelException("O Nome não pode ser nulo.");
		
		if (nome.length() > TAM_MAX_NOME)
			throw new ModelException("O Nome deve ter até "+ TAM_MAX_NOME +" caracteres.");
		
		for (int i = 0; i < nome.length(); i++) {
			char c = nome.charAt(i);
			
			if (!Character.isAlphabetic(c) && !Character.isSpaceChar(c))
				throw new ModelException("O Nome tem um caractere inválido '" + c + "' na posição " + i + ".");
		}
	}
	
	public static void validarDiaNasc(int diaNasc) throws ModelException{
		
		if (diaNasc < VALOR_MIN_DIA || diaNasc > VALOR_MAX_DIA)
			throw new ModelException("O Dia do Nascimento deve estar entre " + VALOR_MIN_DIA + " e " + VALOR_MAX_DIA + ".");
	}
	
	public static void validarMesNasc(String mesNasc) throws ModelException{
		
		if (mesNasc == null)
			throw new ModelException("O Mês do Nascimento não pode ser nulo.");
		
		//TODO Se as opções de "mês" não derem certo, fazer verificação
	}
	
	public static void validarAnoNasc(int anoNasc) throws ModelException{

		if (anoNasc < VALOR_MIN_ANO || anoNasc > VALOR_ANO_ATUAL)
			throw new ModelException("O Ano do Nascimento deve ser entre " + VALOR_MIN_ANO + " e " + VALOR_ANO_ATUAL + ".");
	}
	
	public static void validarTutor(Tutor tutor) throws ModelException {
		if (tutor == null)
			throw new ModelException("É obrigatório indicar quem é o Tutor do Pet.");
	}
}
